<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Health Consulting Services</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { text-align: center; color: white; margin-bottom: 40px; }
        .header h1 { font-size: 2.5rem; margin-bottom: 10px; }
        .header p { font-size: 1.2rem; opacity: 0.9; }
        .card { background: white; border-radius: 15px; padding: 30px; margin: 20px 0; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        .api-test { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
        .endpoint { background: #f8f9fa; padding: 20px; border-radius: 10px; border-left: 4px solid #007bff; }
        .endpoint h3 { color: #007bff; margin-bottom: 10px; }
        .endpoint button { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-top: 10px; }
        .endpoint button:hover { background: #0056b3; }
        .response { background: #f1f3f4; padding: 15px; border-radius: 5px; margin-top: 10px; font-family: monospace; font-size: 14px; max-height: 200px; overflow-y: auto; }
        .status-indicator { display: inline-block; width: 12px; height: 12px; border-radius: 50%; margin-right: 8px; }
        .status-healthy { background: #28a745; }
        .status-error { background: #dc3545; }
        .features { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 30px; }
        .feature { background: white; padding: 25px; border-radius: 10px; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .feature h3 { color: #333; margin-bottom: 15px; }
        .feature p { color: #666; line-height: 1.6; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè• Smart Health Consulting Services</h1>
            <p>AI-Driven Healthcare Platform - Backend API Testing Interface</p>
        </div>

        <div class="card">
            <h2>üîó API Status & Testing</h2>
            <div class="api-test">
                <div class="endpoint">
                    <h3><span id="health-status" class="status-indicator"></span>Health Check</h3>
                    <p>Test if the backend API is running</p>
                    <button onclick="testHealth()">Test Health Endpoint</button>
                    <div id="health-response" class="response" style="display: none;"></div>
                </div>

                <div class="endpoint">
                    <h3>üìö API Documentation</h3>
                    <p>Interactive API documentation with Swagger UI</p>
                    <button onclick="openDocs()">Open API Docs</button>
                </div>

                <div class="endpoint">
                    <h3>üë§ User Registration</h3>
                    <p>Register a new user account</p>
                    <button onclick="testRegister()">Test Registration</button>
                    <div id="register-response" class="response" style="display: none;"></div>
                </div>

                <div class="endpoint">
                    <h3>üîê Authentication</h3>
                    <p>Login with user credentials</p>
                    <button onclick="testLogin()">Test Login</button>
                    <div id="login-response" class="response" style="display: none;"></div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>üöÄ Platform Features</h2>
            <div class="features">
                <div class="feature">
                    <h3>ü§ñ AI Health Assistant</h3>
                    <p>Personalized health risk predictions and recommendations using machine learning models</p>
                </div>
                <div class="feature">
                    <h3>üë©‚Äç‚öïÔ∏è Doctor-Patient Portal</h3>
                    <p>Secure consultation booking and management system with role-based access</p>
                </div>
                <div class="feature">
                    <h3>üìä Health Analytics</h3>
                    <p>Comprehensive health insights and predictive analytics dashboard</p>
                </div>
                <div class="feature">
                    <h3>üîí Blockchain Security</h3>
                    <p>Immutable audit trails for all health data access and modifications</p>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>üìã Next Steps</h2>
            <ol style="line-height: 2; color: #555;">
                <li><strong>Install Node.js</strong> from <a href="https://nodejs.org/" target="_blank">nodejs.org</a></li>
                <li><strong>Run Frontend</strong>: <code>cd frontend && npm install && npm run dev</code></li>
                <li><strong>Setup MongoDB</strong> for full database functionality</li>
                <li><strong>Configure API Keys</strong> in .env file for AI features</li>
            </ol>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8000';

        async function testHealth() {
            const responseDiv = document.getElementById('health-response');
            const statusIndicator = document.getElementById('health-status');
            
            try {
                const response = await fetch(`${API_BASE}/health`);
                const data = await response.json();
                
                responseDiv.innerHTML = JSON.stringify(data, null, 2);
                responseDiv.style.display = 'block';
                statusIndicator.className = 'status-indicator status-healthy';
            } catch (error) {
                responseDiv.innerHTML = `Error: ${error.message}`;
                responseDiv.style.display = 'block';
                statusIndicator.className = 'status-indicator status-error';
            }
        }

        function openDocs() {
            window.open(`${API_BASE}/docs`, '_blank');
        }

        async function testRegister() {
            const responseDiv = document.getElementById('register-response');
            
            const testUser = {
                email: "test@example.com",
                password: "testpassword123",
                full_name: "Test User",
                role: "patient"
            };

            try {
                const response = await fetch(`${API_BASE}/api/auth/register`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(testUser)
                });
                
                const data = await response.json();
                responseDiv.innerHTML = JSON.stringify(data, null, 2);
                responseDiv.style.display = 'block';
            } catch (error) {
                responseDiv.innerHTML = `Error: ${error.message}`;
                responseDiv.style.display = 'block';
            }
        }

        async function testLogin() {
            const responseDiv = document.getElementById('login-response');
            
            const credentials = {
                username: "test@example.com",
                password: "testpassword123"
            };

            try {
                const formData = new FormData();
                formData.append('username', credentials.username);
                formData.append('password', credentials.password);

                const response = await fetch(`${API_BASE}/api/auth/login`, {
                    method: 'POST',
                    body: formData
                });
                
                const data = await response.json();
                responseDiv.innerHTML = JSON.stringify(data, null, 2);
                responseDiv.style.display = 'block';
            } catch (error) {
                responseDiv.innerHTML = `Error: ${error.message}`;
                responseDiv.style.display = 'block';
            }
        }

        // Test health on page load
        window.onload = function() {
            testHealth();
        };
    </script>
</body>
</html>
